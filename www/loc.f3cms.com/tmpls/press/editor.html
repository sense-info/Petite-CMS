<form class="gee engrossed-form" data-gene="init:press.initForm" data-tmpl="pressForm" id="pressForm">
  <div class="columns is-multiline is-engrossed-t editor pid-{{:item.id}}-">
    <div class="column">
      <div class="tabs-content box" >
        <div class="tab-box" title="基本資訊">
          <div class="field">
            <label class="label">語意化網址</label>
            <p class="control has-icons-left">
              <input class="input" name="slug" type="text" placeholder="客製化網址提升轉化率！此欄位非必填，可留空" style="padding-left: 4.5em;">
              <span class="icon is-small is-left" style="left: 1.75em; color: #999;">/p/{{:item.id}}/</span>
            </p>
          </div>
          <div class="columns">
            <div class="column is-6">
              <div class="field">
                <label class="label">文章列表封面</label>
                <gee-upload module-name="press" data-param="cover" info-text="400x400"></gee-upload>
              </div>
            </div>
            <div class="column is-6">
              <div class="field">
                <label class="label">文章單頁大圖</label>
                <gee-upload module-name="press" data-param="banner" info-text="1600x900"></gee-upload>
              </div>
            </div>
          </div>
          {{if item.id }}{{if item.lang.tw.info != '' }}{{if item.lang.tw.content != '' }}
          <div class="field"><div class="control">
            {{if item.lang.en.content == '' }}
              <button type="button" class="button is-warning pre-gee m-2 pull-right" data-gene="click:arena/touch"
                data-confirm="點擊【確定】後翻譯，請至草稿區查看結果!!" data-endpoint="draft/translate" data-params='{"press_id":"{{:item.id}}","target":"en"}'>翻為英文</button>
            {{/if}}
            {{if item.lang.ko.content == '' }}
              <button type="button" class="button is-warning pre-gee m-2 pull-right" data-gene="click:arena/touch"
                data-confirm="點擊【確定】後翻譯，請至草稿區查看結果!!" data-endpoint="draft/translate" data-params='{"press_id":"{{:item.id}}","target":"ko"}'>翻為韓文</button>
            {{/if}}
            {{if item.lang.jp.content == '' }}
              <button type="button" class="button is-warning pre-gee m-2 pull-right" data-gene="click:arena/touch"
                data-confirm="點擊【確定】後翻譯，請至草稿區查看結果!!" data-endpoint="draft/translate" data-params='{"press_id":"{{:item.id}}","target":"jp"}'>翻為日文</button>
            {{/if}}
          </div></div>
          {{/if}}{{/if}}{{/if}}
          <div class="field">
            <p class="control">
              <input class="input" name="lang[tw][title]" type="text" placeholder="Title">
            </p>
          </div>
          <div class="field">
            <input type="radio" class="is-checkradio" name="lang[tw][from_ai]" value="Yes" id="press-fromai-tw-yes">
            <label class="radio" for="press-fromai-tw-yes">由 AI 翻譯</label>
            <input type="radio" class="is-checkradio" name="lang[tw][from_ai]" value="No" checked="checked" id="press-fromai-tw-no">
            <label class="radio" for="press-fromai-tw-no">非</label>
            {{if item.lang.tw.content != '' }} <a href="/tw/preview/p/{{:item.id}}" target="_blank" class="button is-info pull-right">預覽</a> {{/if}}
          </div>
          <div class="field">
            <p class="control">
              <textarea name="lang[tw][info]" class="textarea" placeholder="一百字內之簡介"></textarea>
            </p>
          </div>
          <div class="field">
            <p class="control">
              <gee:editor data-param="lang[tw][content]" data-inline="0"></gee:editor>
            </p>
          </div>

          <div class="field">
            <label class="label">推薦文章</label>
            <div class="control is-block">
              <input type="text" multiple class="multipleSelect" data-sortable="1" name="relateds" placeholder="請輸入字詞查詢" data-url='press/get_opts' />
            </div>
          </div>

        </div>
        <div class="tab-box" title="英文資訊">
          <div class="field">
            <p class="control">
              <input class="input" name="lang[en][title]" type="text" placeholder="Title">
            </p>
          </div>
          <div class="field">
            <input type="radio" class="is-checkradio" name="lang[en][from_ai]" value="Yes" id="press-fromai-en-yes">
            <label class="radio" for="press-fromai-en-yes">由 AI 翻譯</label>
            <input type="radio" class="is-checkradio" name="lang[en][from_ai]" value="No" checked="checked" id="press-fromai-en-no">
            <label class="radio" for="press-fromai-en-no">非</label>
            {{if item.lang.en.content }} <a href="/en/preview/p/{{:item.id}}" target="_blank" class="button is-info pull-right">預覽</a> {{/if}}
          </div>
          <div class="field">
            <p class="control">
              <textarea name="lang[en][info]" class="textarea" placeholder="一百字內之簡介"></textarea>
            </p>
          </div>
          <div class="field">
            <p class="control">
              <gee:editor data-param="lang[en][content]" data-inline="0"></gee:editor>
            </p>
          </div>
        </div>
        <div class="tab-box" title="日文資訊">
          <div class="field">
            <p class="control">
              <input class="input" name="lang[jp][title]" type="text" placeholder="Title">
            </p>
          </div>
          <div class="field">
            <input type="radio" class="is-checkradio" name="lang[jp][from_ai]" value="Yes" id="press-fromai-jp-yes">
            <label class="radio" for="press-fromai-jp-yes">由 AI 翻譯</label>
            <input type="radio" class="is-checkradio" name="lang[jp][from_ai]" value="No" checked="checked" id="press-fromai-jp-no">
            <label class="radio" for="press-fromai-jp-no">非</label>
            {{if item.lang.jp.content }} <a href="/jp/preview/p/{{:item.id}}" target="_blank" class="button is-info pull-right">預覽</a> {{/if}}
          </div>
          <div class="field">
            <p class="control">
              <textarea name="lang[jp][info]" class="textarea" placeholder="一百字內之簡介"></textarea>
            </p>
          </div>
          <div class="field">
            <p class="control">
              <gee:editor data-param="lang[jp][content]" data-inline="0"></gee:editor>
            </p>
          </div>
        </div>
        <div class="tab-box" title="韓文資訊">
          <div class="field">
            <p class="control">
              <input class="input" name="lang[ko][title]" type="text" placeholder="Title">
            </p>
          </div>
          <div class="field">
            <input type="radio" class="is-checkradio" name="lang[ko][from_ai]" value="Yes" id="press-fromai-ko-yes">
            <label class="radio" for="press-fromai-ko-yes">由 AI 翻譯</label>
            <input type="radio" class="is-checkradio" name="lang[ko][from_ai]" value="No" checked="checked" id="press-fromai-ko-no">
            <label class="radio" for="press-fromai-ko-no">非</label>
            {{if item.lang.ko.content }} <a href="/ko/preview/p/{{:item.id}}" target="_blank" class="button is-info pull-right">預覽</a> {{/if}}
          </div>
          <div class="field">
            <p class="control">
              <textarea name="lang[ko][info]" class="textarea" placeholder="一百字內之簡介"></textarea>
            </p>
          </div>
          <div class="field">
            <p class="control">
              <gee:editor data-param="lang[ko][content]" data-inline="0"></gee:editor>
            </p>
          </div>
        </div>
        <div class="tab-box" title="圖集">
          <div class="field only-bf-save">
            <label class="label">儲存內容後，才可設定圖集資訊</label>
          </div>
          <div class="columns only-af-save is-multiline">
            <div class="column is-9">
              <gee-uploadDnD module-name="press" multiple="true" data-param="banner" info-text="最大寬度 1440px"></gee-uploadDnD>
            </div>
            <div class="divider is-vertical">OR</div>
            <div class="column is-2">
              <div class="is-vertical-middle"><div class="field has-text-centered"><a class="button is-primary modal-btn pre-gee" data-gene="click:showModal" data-tmpl="subMediaForm" data-src="media" data-size="nor" data-id="0" data-silence="1">新增圖片</a><br /> <small>  <!-- <i class="fa fa-question-circle"></i> 請先儲存後，再上傳圖檔 --></small></div></div>
            </div>
            <div class="column">
              <div class="gee" data-gene="init:media.loadList,click:reactList" data-tmpl="subMediaList" data-nopde="1" >
                <div class="columns is-multiline">
              {{props data}}<div class="column is-4 sub-media-item loop-item" data-id="{{:prop.id}}">
                <div class="card lighter-shadow">
                  <div class="card-image">
                    <figure class="image is-1by1"> <img pre-src="{{:~loadPic(prop.pic, 600, 600)}}" alt="{{:prop.title}}"> </figure>
                  </div>
                  <div class="card-content">
                    <a href="{{:~loadPic(prop.pic)}}" target="_blank">{{:prop.title}} <span class="icon"><i class="fa fa-share-square-o"></i></span></a>
                    <nav class="level">
                      <div class="level-left">
                        <div class="level-item"><small>{{:~formatDate(prop.last_ts, 'YYYY-MM-DD')}}</small></div>
                        <div class="level-item"><span class="tag {{if prop.status == 'Disabled' }}is-warning{{else}}is-success{{/if}}">{{:prop.status}}</div>
                      </div>
                      <div class="level-right">
                        <div class="level-item">
                          <div class="field has-addons">
                            <p class="control">
                              <a href="javascript:;" class="modal-btn button is-info" data-func="media.loadRow" data-tmpl="subMediaForm" data-src="media" data-size="nor" data-id="{{:prop.id}}" data-silence="1"> 編輯 </a>
                            </p>
                          </div>
                        </div>
                      </div>
                    </nav>
                  </div>
                </div></div>
                {{/props}}</div>
              </div>
              <div class="list-footer">
                <nav class="pagination">
                  <ul id="paginate"></ul>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="column is-4">
      <div class="tabs-content box">
        <div class="tab-box" title="管理">
          <div class="field is-grouped">
            <p class="control">
              <button type="button" class="button is-primary pre-gee" data-gene="click:press.setRow" data-tmpl="pressForm">儲存內容變動</button>
            </p>
            <p class="control js-published-f only-af-save">
              <!-- <button type="button" class="button is-primary pre-gee" data-gene="click:press.online" data-force="1">發布新版本</button> -->
              <!-- <a href="/preview/p/{{:item.id}}" target="_blank" class="button is-info">預覽</a> -->
            </p>
          </div>

          <div class="field">
            <label class="label">版型</label>
            <p class="control">
              <span class="select"><gee:set-option module="genus" name="layout" params='{"group":"press"}'></gee:set-option></span>
            </p>
          </div>

          <div class="field">
            <label class="label">分類</label>
            <p class="control">
              <span class="select"><gee:set-option module="category" name="cate_id" params='{"group":"press"}'></gee:set-option></span>
            </p>
          </div>

          <div class="field">
            <label class="label">排序</label>
            <p class="control">
              <input class="input" name="sorter" type="text" placeholder="排序：預設 99">
            </p>
          </div>

          <div class="field no-kol">
            <label class="label">作者</label>
            <div class="control">
              <input type="text" multiple class="multipleSelect" data-sortable="1" name="authors" placeholder="請輸入字詞查詢" data-url="author/get_opts" />
            </div>
          </div>

          <div class="field">
            <label class="label">標籤</label>
            <div class="control">
              <input type="text" multiple class="multipleSelect" data-sortable="1" name="tags" placeholder="請輸入字詞查詢" data-url='tag/get_opts' />
            </div>
          </div>

          <div class="field">
            <label class="label">相關字詞</label>
            <div class="control is-block">
              <input type="text" multiple class="multipleSelect" data-sortable="1" name="terms" placeholder="請輸入字詞查詢" data-url='dictionary/get_opts' />
            </div>
          </div>
        </div>
        <div class="tab-box" title="發布設定">
          <div class="only-bf-save">
            <div class="field js-published-f">
              <label class="label">儲存內容後，才可設定發布資訊</label>
            </div>
          </div>
          <div class="only-af-save">
            <div class="field js-published-f">
              <label class="label">目前狀態：<span class="j-press-status">{{:item.status}}</span></label>
            </div>

            <div class="field js-published-f">
              <p class="control">
                <input type="radio" class="is-checkradio" name="status" value="Published" id="status-published">
                <label class="radio" for="status-published">立即發布</label>
                <input type="radio" class="is-checkradio" name="status" value="Scheduled" id="status-scheduled">
                <label class="radio" for="status-scheduled">排程發布</label>
                <br>
              </p>
            </div>
            <div class="field js-published-t hidden">
              <p class="control">
                已發布於 <span class="js-published-time"></span>
                <br>
              </p>
            </div>
            <div class="field js-published-t is-grouped hidden">
              <p class="control">
                <button type="button" class="button is-danger pre-gee" data-gene="click:press.offline">下架</button>
              </p>
              <p class="control">
                <button type="button" class="button is-warning pre-gee" data-gene="click:press.flush" data-id="{{:item.id}}" >清除快取</button>
              </p>
            </div>

            <div class="field js-published-f">
              <label class="label">發布時間</label>
              <p class="control">
                <input type="datetime-local" class="datetime-local" name="online_date">
              </p>
            </div>

            <div class="field is-grouped js-published-f">
              <p class="control">
                <button type="button" class="button pre-gee" data-gene="click:press.reset">重設</button>
              </p>
              <p class="control">
                <button type="button" class="button is-primary pre-gee" data-gene="click:press.online">儲存發布設定</button>
              </p>
            </div>
            <!-- <div class="is-divider" data-content="History"></div>
            <ul id="history-list"></ul> -->
          </div>
        </div>
      </div>
      <input type="hidden" name="id">
    </div>
  </div>
</form>
